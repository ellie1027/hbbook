---
title: '객체지향 프로그래밍 기본 (1)'
date: 2020-10-28 16:21:13
category: 'java'
draft: false
---

## (1) 객체지향언어란?
단순하게 말하자면 프로그래밍 언어에 '객체 지향 개념 규칙' 이 합쳐진 것이다.
이러한 규칙들을 활용하여 코드 간에 서로 관계를 맺어줌으로써 유기적으로 프로그램을 구성할 수 있다.

객체 지향 개념을 사용할 경우 다음과 같은 장점이 있다.

* 새로운 코드를 작성할 때 기존에 있던 코드를 이용하여 쉽게 작성할 수 있다. (재사용성)
* 코드 간의 관계를 이용하여 적은 노력으로 쉽게 코드를 변경 할 수 있다. (유지보수)
* 제어자와 메서드를 이용하여 데이터를 보호하고, 올바른 값을 유지하도록 하며, 코드의 중복을 제거하여 코드의 불일치로 인한 오동작을 방지한다. (중복코드제거)

<p class="notice--info"> <strong>Watch out!</strong> 너무 객체지향개념에 얽매여서 고민하기 보다는 일단 프로그램을 기능적으로 완성한 다음에 계속해서 리팩토링하여 코드를 개선하는 것이 좋다. </p>

## (2) 클래스와 객체란?

클래스 - 객체의 설계도
객체 - 클래스에 정의된 내용대로 메모리에 생성된 것

객체를 사용하려면, 먼저 클래스로부터 객체를 생성하는 과정이 필요하다. 이 과정을 클래스의 인스턴스화라고 한다. 이렇게 만들어진 객체는 그 클래스의 인스턴스라고 한다.
객체는 속성과 기능으로 이루어져 있다.

속성) 멤버변수, 특성, 필드, 상태
기능) 메서드, 함수, 행위

```java
Tv t; //참조변수 선언. 메모리에 참조변수 t를 위한 공간이 마련된다.
t = new Tv(); //연산자 new에 의해 Tv클래스의 인스턴스(객체)가 메모리의 빈 공간에 생성된다. 멤버 변수는 기본값으로 초기화된다. 그 후 대입 연산자에 의해 생성된 객체의 주소값이 참조변수 t에 저장된다.
```

이제 Tv클래스 타입 참조변수 t로 Tv인스턴스에 접근할 수 있다.


## (3) 인스턴스의 특성

```java
Tv t1 = new Tv();
Tv t2 = new Tv();
```

t1과 t2의 각 인스턴스의 속성은 서로 다른 값을 유지하며, 메서드를 모든 인스턴스에 대해 동일하다.

```java
t1 = t2; //t1이 저장하고 있는 값(주소)를 t2에 저장한다. t2가 t1이 참조하고 있던 인스턴스를 같이 참조하게 된다.
```

<p class="notice--info"> <strong>Watch out!</strong> 자신을 참조하고 있는 참조변수가 하나도 없는 인스턴스는 더 이상 사용되지 않으므로 가비지 컬렉터에 의해 자동적으로 메모리에서 제거된다.</p>


## (4) 객체 배열

객체 역시 배열로 다루는 것이 가능하다. 객체 배열은 참조변수들을 하나로 묶은 참조 변수 배열이라고 할수 있다.

```java
Tv tv1, tv2, tv3; ---> Tv[] tvArr = new Tv[3];
```

객체 배열을 만드는 것은 단지 객체를 다루기 위한 참조 변수들이 만들어진 것으로, 객체를 생성하여 각 객체 배열의 요소에 저장해야 한다. 예를 들면

```java
tvArr[0] = new Tv();
tvArr[1] = new Tv();
tvArr[2] = new Tv();
```

혹은 배열의 초기화 블럭을 사용하여 다음과 같이 저장한다.

```java
Tv[] tvArr = { new Tv(), new Tv(), new Tv() };
```

## (5) 프로그래밍적인 관점에서의 클래스?

지금까지 객체지향적인 관점에서 클래스와 객체를 살펴보았다.
프로그래밍적 관점에서의 클래스란, 다음과 같이 정의할 수 있다.

1. 데이터와 함수의 결합
    - 서로 관련된 변수들을 정의하고 이들에 대한 작업을 수행하는 함수들을 함께 정의한 것.

2. 사용자 정의 타입(user defined type)
    - primitive type 외에 서로 관련된 변수들을 묶어서 하나의 타입으로 새로 추가하는 것. 객체지향언어에서는 클래스가 곧 사용자 정의 타입.

비객체지향적 코드
```java
int hour1, hour2, hour3;
int minute1, minute2, minute3;
int second1, second2, second3;
```

객체지향적 코드
```java
Time t1 = new Time();
Time t2 = new Time();
```

## (6) 변수와 메서드

변수는 선언된 위치에 따라서 종류가 달라진다.

1. 클래스 변수
2. 인스턴스 변수
3. 지역 변수

'멤버 변수' 를 제외한 다른 변수는 모두 지역 변수이며(주로 메서드 영역 안에 선언되는 것들)
멤버 변수 중 <strong>static</strong>이 붙은 것은 클래스 변수, 붙지 않은 것은 인스턴스 변수이다.

```java
int iv; // 인스턴스 변수
static int cv;  // 클래스 변수(static 변수, 공유변수)

void method(){
    int lv = 0; // 지역 변수
}
```

| 변수의 종류         | 선언 위치     |  생성 시기                                                      |
|------------------|----------  |--------------------------------------------------------------    |
| 클래스 변수     | 클래스 영역         | 클래스에 메모리가 올라 갈 때                                     |
| 인스턴스 변수    | 클래스 영역     | 인스턴스가 생성되었을 때                                            |
| 지역 변수       | 클래스 영역이 아닌 곳.(메서드, 생성자, 초기화 블럭 내부)      | 변수 선언문이 수행되었을 때 |


##### 인스턴스 변수

클래스 영역에 선언. 인스턴스는 독립적인 저장공간을 가지므로 서로 다른 값을 가질 수 있다.
<strong>인스턴스마다 고유한 상태를 유지해야 하는 속성의 경우, 인스턴스 변수로 선언한다</strong>

##### 클래스 변수

인스턴스 변수 앞에 static을 붙여서 선언한다. 모든 인스턴스가 공통된 저장공간(변수)을 공유한다.
<strong>인스턴스들이 공통적인 값을 유지해야 하는 속성의 경우, 클래스 변수로 선언한다</strong>
클래스가 메모리에 로딩 될 때 생성되어 프로그램이 종료될 때 까지 유지됨.

##### 지역 변수

메서드 내에서만 사용 가능.


## 클래스 변수와 인스턴스 변수의 차이를 좀더 알아보자.

고정적이어야 할 것과 커스텀 해도 무방한 것의 차이같다.
예를 들면 화투를 제작하려고 할 때, 화투의 width와 height은 전부 같아야 하는 반면, 화투 안의 그림은 전부 달라야 할 것이다.
전부 다른다는 것은 각 인스턴스 마다 자신의 고유한 상태를 가져야 한다는 것이다.
따라서 width, height은 static을 붙여 클래스 변수로 만들고 그림은 인스턴스 변수로 만든다.

<p class="notice--info"> <strong>Watch out!</strong> 클래스 변수(static 변수)는 객체생성 없이 '클래스이름.클래스변수'로 직접 사용 가능하다.</p>


## 메서드란?

메서드란 <strong>특정 작업을 수행하는 일련의 문장들을 묶은 것</strong>이다.
메서드를 사용하는 이유는 재사용성, 중복코드 제거, 프로그램 구조화 등이 있다.
메서드를 만들어 놓고 필요한 곳마다 호출하면 코드도 깔끔해지고 유지보수 할 때도 메서드만 고치면 되니 편하다!

<p class="notice--info"> <strong>Watch out!</strong> 큰 규모의 프로그램에서는 문장들을 작업단위로 나눠서 여러 개의 메서드에 담아 프로그램의 구조를 단순화시키는 것이 필수적이다. </p>

메서드 안에 선언된 변수들을 지역 변수라고 한다.
<p class="notice--info"> <strong>Watch out!</strong> 매개 변수도 메서드 내에 선언된 것으로 간주하므로 지역변수이다. </p>
같은 클래스 내의 메서드 끼리는 참조변수를 사용하지 않고도 호출이 가능하지만 <strong>static 메서드는 같은 클래스 내의 인스턴스 메서드를 호출 할 수 없다.</strong>


## 매개 변수의 유효성 검사

타입만 맞으면 어떤 값도 매개변수를 통하여 넘어올 수 있기 때문에, 가능한 모든 경우의 수에 대해 고민하고 그에 대비한 코드를 작성해야 한다.

## JVM의 메모리 구조

응용 프로그램이 실행되면, JVM은 시스템으로부터 프로그램을 수행하는데 필요한 메모리를 할당받고, 용도에 따라 여러 영역으로 나누어 관리한다.

##### 메서드 영역

    - 클래스 사용시, jvm은 해당 클래스의 *.class 파일을 읽어서 분석하여 클래스에 대한 정보를 이 곳에 저장 한다. 그 클래스의 클래스 변수도 이 곳에 함께 생성된다.

##### 힙

    - 인스턴스가 생성되는 공간. 인스턴스 변수들이 생성되는 공간.
##### 3) 호출 스택(call stack, execution stack)

    - 메서드의 작업에 필요한 메모리 공간을 제공. 메서드 호출 시, 호출스택에 호출된 메서드를 위한 메모리가 할당된다.
     이 메모리는 메서드가 작업을 수행하는 동안 지역변수들과 연산의 중간결과 등을 저장하는데 사용된다.
     메서드가 작업을 마치면 할당되었던 메모리공간은 반환된다.

<p class="notice--info"> <strong>Watch out!</strong> 호출 스택에 제일 위에 있는 메서드가 현재 실행 중인 메서드이다. </p>

```java
class CallstackTest{

    public static void main(String[] args){
        first();
    }

    static void fisrt(){
        second();
    }

    static void second(){
        System.out.println("second method");
    }
}
```

해당 메서드 실행 흐름(아래에서 위로 올라감)
```java

                println------------------------->
            second---------------------------------->
        first------------------------------------------->
    main--------------------------------------------------->
```



<kbd>reference ; 자바의 정석 3판</kbd>
